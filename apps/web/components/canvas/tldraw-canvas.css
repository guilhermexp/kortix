/* TLDraw Canvas Custom Styles - Integrated with App Theme System */

/* ============================================
   Style Panel Visibility Toggle
   ============================================ */
.tldraw-canvas-container .tlui-style-panel {
	transition: opacity 0.2s ease-in-out;
}

.tldraw-canvas-container.style-panel-hidden .tlui-style-panel {
	opacity: 0;
	pointer-events: none;
}

.tldraw-canvas-container.style-panel-visible .tlui-style-panel {
	opacity: 1;
	pointer-events: auto;
}

/* ============================================
   Main Toolbar - HIDDEN (tools are in CanvasAIBar)
   ============================================ */

/* Hide the main toolbar completely - we use custom buttons in CanvasAIBar */
.tldraw-canvas-container .tlui-layout__bottom__main {
	display: none;
}

/* Hide navigation panel (zoom controls) */
.tldraw-canvas-container .tlui-navigation-panel {
	display: none;
}

/* ============================================
   Style Panel - Right side, separate from toolbar
   ============================================ */
.tldraw-canvas-container .tlui-layout__top__right {
	position: fixed;
	top: 80px;
	right: 16px;
	z-index: 100;
}

.tldraw-canvas-container .tlui-style-panel {
	max-height: calc(100vh - 120px);
	overflow-y: auto;
}

/* ============================================
   Hide Watermark
   ============================================ */
.tlui-watermark_SEE-LICENSE,
[class*="watermark"],
[class*="Watermark"] {
	display: none;
}

/* ============================================
   Loading Animations
   ============================================ */
@keyframes shimmer {
	0% {
		transform: translateX(-100%);
	}
	100% {
		transform: translateX(100%);
	}
}

@keyframes progress {
	0% {
		width: 0%;
	}
	50% {
		width: 70%;
	}
	100% {
		width: 100%;
	}
}

.animate-shimmer {
	animation: shimmer 2s infinite;
}

.animate-progress {
	animation: progress 30s ease-out forwards;
}

/* ============================================
   Minimal Toolbar Style - No Blue Background
   ============================================ */

/* Remove TLDraw's default blue selection background */
.tldraw-canvas-container .tlui-button[data-state="selected"],
.tldraw-canvas-container .tlui-button[aria-pressed="true"],
.tldraw-canvas-container .tlui-button[aria-checked="true"] {
	background-color: transparent;
	background: transparent;
}

/* Remove the blue ::after pseudo-element that TLDraw uses for selection */
.tldraw-canvas-container .tlui-button::after,
.tldraw-canvas-container .tlui-button[aria-pressed="true"]::after,
.tldraw-canvas-container .tlui-button[data-state="selected"]::after {
	background-color: transparent;
	background: transparent;
	display: none;
}

/* Toolbar container - minimal, no background */
.tldraw-canvas-container .tlui-main-toolbar__inner {
	background-color: transparent;
	background: transparent;
	border: none;
	box-shadow: none;
	gap: 2px;
	padding: 4px;
}

/* Individual tool buttons - minimal style */
.tldraw-canvas-container .tlui-main-toolbar .tlui-button {
	background-color: transparent;
	border-radius: 8px;
	padding: 8px;
	min-width: 36px;
	min-height: 36px;
}

/* Hover effect - subtle gray */
.tldraw-canvas-container .tlui-main-toolbar .tlui-button:hover {
	background-color: oklch(0.5 0 0 / 10%);
}

/* Selected state - subtle background, no blue */
.tldraw-canvas-container .tlui-main-toolbar .tlui-button[data-state="selected"],
.tldraw-canvas-container .tlui-main-toolbar .tlui-button[aria-pressed="true"] {
	background-color: oklch(0.5 0 0 / 15%);
}

/* ============================================
   Light Theme - Integrated with App Variables
   ============================================ */
.tldraw-theme-light .tlui-main-toolbar__inner,
.tldraw-theme-light .tlui-main-toolbar {
	background-color: transparent;
	border-color: transparent;
}

.tldraw-theme-light .tlui-button {
	color: oklch(0.25 0 0);
}

.tldraw-theme-light .tlui-button:hover {
	background-color: oklch(0 0 0 / 8%);
	color: oklch(0.1 0 0);
}

.tldraw-theme-light .tlui-button[data-state="selected"],
.tldraw-theme-light .tlui-button[aria-pressed="true"] {
	background-color: oklch(0 0 0 / 10%);
	color: oklch(0.1 0 0);
}

/* Light mode icons - ensure visibility */
.tldraw-theme-light .tlui-icon {
	color: oklch(0.25 0 0);
}

.tldraw-theme-light .tlui-button:hover .tlui-icon,
.tldraw-theme-light .tlui-button[aria-pressed="true"] .tlui-icon {
	color: oklch(0.1 0 0);
}

/* Style panel light mode */
.tldraw-theme-light .tlui-style-panel {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
}

.tldraw-theme-light .tlui-style-panel__content {
	color: oklch(0.141 0.005 285.823);
}

/* Popover/dropdown light mode */
.tldraw-theme-light .tlui-popover,
.tldraw-theme-light .tlui-menu {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
	color: oklch(0.141 0.005 285.823);
}

.tldraw-theme-light .tlui-menu__item:hover {
	background-color: oklch(0.967 0.001 286.375);
}

/* Canvas background light mode */
.tldraw-theme-light .tl-background {
	background-color: oklch(0.98 0 0);
}

/* ============================================
   Dark Theme - Integrated with App Variables
   ============================================ */
.tldraw-theme-dark .tlui-main-toolbar__inner,
.tldraw-theme-dark .tlui-main-toolbar {
	background-color: transparent;
	border-color: transparent;
}

.tldraw-theme-dark .tlui-button {
	color: oklch(0.7 0 0);
}

.tldraw-theme-dark .tlui-button:hover {
	background-color: oklch(1 0 0 / 10%);
}

.tldraw-theme-dark .tlui-button[data-state="selected"],
.tldraw-theme-dark .tlui-button[aria-pressed="true"] {
	background-color: oklch(1 0 0 / 15%);
	color: oklch(1 0 0);
}

/* Style panel dark mode */
.tldraw-theme-dark .tlui-style-panel {
	background-color: oklch(0.1 0 0);
	border-color: oklch(1 0 0 / 10%);
}

.tldraw-theme-dark .tlui-style-panel__content {
	color: oklch(1 0 0);
}

/* Popover/dropdown dark mode */
.tldraw-theme-dark .tlui-popover,
.tldraw-theme-dark .tlui-menu {
	background-color: oklch(0.05 0 0);
	border-color: oklch(1 0 0 / 10%);
	color: oklch(1 0 0);
}

.tldraw-theme-dark .tlui-menu__item:hover {
	background-color: oklch(0.15 0 0);
}

/* Canvas background dark mode */
.tldraw-theme-dark .tl-background {
	background-color: oklch(0 0 0);
}

/* ============================================
   Sidebar Icons - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-icon {
	color: oklch(0.141 0.005 285.823);
}

.tldraw-theme-dark .tlui-icon {
	color: oklch(1 0 0);
}

/* ============================================
   Quick Actions Bar - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-quick-actions {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
}

.tldraw-theme-dark .tlui-quick-actions {
	background-color: oklch(0.1 0 0);
	border-color: oklch(1 0 0 / 10%);
}

/* ============================================
   Page Menu - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-page-menu,
.tldraw-theme-light .tlui-page-menu__wrapper {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
	color: oklch(0.141 0.005 285.823);
}

.tldraw-theme-dark .tlui-page-menu,
.tldraw-theme-dark .tlui-page-menu__wrapper {
	background-color: oklch(0.05 0 0);
	border-color: oklch(1 0 0 / 10%);
	color: oklch(1 0 0);
}

/* ============================================
   Navigation Zone - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-navigation-zone {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
}

.tldraw-theme-dark .tlui-navigation-zone {
	background-color: oklch(0.1 0 0);
	border-color: oklch(1 0 0 / 10%);
}

/* ============================================
   Help Menu - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-help-menu {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
}

.tldraw-theme-dark .tlui-help-menu {
	background-color: oklch(0.1 0 0);
	border-color: oklch(1 0 0 / 10%);
}

/* ============================================
   Debug Panel - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-debug-panel {
	background-color: oklch(1 0 0);
	color: oklch(0.141 0.005 285.823);
}

.tldraw-theme-dark .tlui-debug-panel {
	background-color: oklch(0.1 0 0);
	color: oklch(1 0 0);
}

/* ============================================
   Toast Notifications - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-toast {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
	color: oklch(0.141 0.005 285.823);
}

.tldraw-theme-dark .tlui-toast {
	background-color: oklch(0.1 0 0);
	border-color: oklch(1 0 0 / 10%);
	color: oklch(1 0 0);
}

/* ============================================
   Dialogs - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-dialog {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
	color: oklch(0.141 0.005 285.823);
}

.tldraw-theme-dark .tlui-dialog {
	background-color: oklch(0.05 0 0);
	border-color: oklch(1 0 0 / 10%);
	color: oklch(1 0 0);
}

/* ============================================
   Inputs - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-input {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0.004 286.32);
	color: oklch(0.141 0.005 285.823);
}

.tldraw-theme-dark .tlui-input {
	background-color: oklch(0.15 0 0);
	border-color: oklch(1 0 0 / 15%);
	color: oklch(1 0 0);
}

/* ============================================
   Kbd Shortcuts - Theme Aware
   ============================================ */
.tldraw-theme-light .tlui-kbd {
	background-color: oklch(0.967 0.001 286.375);
	color: oklch(0.552 0.016 285.938);
}

.tldraw-theme-dark .tlui-kbd {
	background-color: oklch(0.2 0 0);
	color: oklch(0.6 0 0);
}

/* ============================================
   Bookmark Cards - Minimalist Modern Design
   ============================================ */

/* Main container - clean rounded corners, subtle border */
.tldraw-canvas-container .tl-bookmark__container {
	border-radius: 12px;
	border: 1px solid oklch(0.5 0 0 / 15%);
	overflow: hidden;
	box-shadow: 0 2px 8px oklch(0 0 0 / 8%);
	transition:
		box-shadow 0.2s ease,
		border-color 0.2s ease;
}

.tldraw-canvas-container .tl-bookmark__container:hover {
	box-shadow: 0 4px 16px oklch(0 0 0 / 12%);
	border-color: oklch(0.5 0 0 / 25%);
}

/* Image container - aspect ratio and smooth corners */
.tldraw-canvas-container .tl-bookmark__image_container {
	border-radius: 12px 12px 0 0;
	max-height: 140px;
	overflow: hidden;
}

/* Image - cover entire area */
.tldraw-canvas-container .tl-bookmark__image {
	border-bottom: none;
	object-fit: cover;
}

/* Placeholder when no image */
.tldraw-canvas-container .tl-bookmark__placeholder {
	background: linear-gradient(
		135deg,
		oklch(0.3 0 0 / 10%),
		oklch(0.5 0 0 / 15%)
	);
	border-bottom: none;
}

/* Content container - minimal padding */
.tldraw-canvas-container .tl-bookmark__copy_container {
	padding: 12px 14px;
	gap: 6px;
}

/* Title - clean typography */
.tldraw-canvas-container .tl-bookmark__heading {
	font-size: 14px;
	font-weight: 600;
	line-height: 1.4;
	padding-bottom: 0;
	letter-spacing: -0.01em;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

/* Description - subtle and compact */
.tldraw-canvas-container .tl-bookmark__description {
	font-size: 11px;
	line-height: 1.4;
	opacity: 0.7;
	max-height: calc(11px * 1.4 * 2);
	-webkit-line-clamp: 2;
}

/* Link/URL row - minimal style */
.tldraw-canvas-container .tl-bookmark__link {
	font-size: 10px;
	opacity: 0.5;
	margin-top: 4px;
}

.tldraw-canvas-container .tl-bookmark__heading + .tl-bookmark__link,
.tldraw-canvas-container .tl-bookmark__description + .tl-bookmark__link {
	margin-top: 6px;
}

/* Favicon - smaller and subtle */
.tldraw-canvas-container .tl-bookmark__link > .tl-bookmark__favicon {
	width: 12px;
	height: 12px;
	margin-right: 6px;
	opacity: 0.7;
}

/* Hyperlink icon */
.tldraw-canvas-container .tl-bookmark__link > .tl-hyperlink__icon {
	margin-right: 6px;
	opacity: 0.5;
}

/* ============================================
   Bookmark Cards - Light Theme
   ============================================ */
.tldraw-theme-light .tl-bookmark__container {
	background-color: oklch(1 0 0);
	border-color: oklch(0.9 0 0);
}

.tldraw-theme-light .tl-bookmark__copy_container {
	background-color: oklch(1 0 0);
}

.tldraw-theme-light .tl-bookmark__heading {
	color: oklch(0.15 0 0);
}

.tldraw-theme-light .tl-bookmark__description {
	color: oklch(0.35 0 0);
}

.tldraw-theme-light .tl-bookmark__link {
	color: oklch(0.5 0 0);
}

.tldraw-theme-light .tl-bookmark__placeholder {
	background: linear-gradient(135deg, oklch(0.96 0 0), oklch(0.93 0 0));
}

/* ============================================
   Bookmark Cards - Dark Theme
   ============================================ */
.tldraw-theme-dark .tl-bookmark__container {
	background-color: oklch(0.12 0 0);
	border-color: oklch(1 0 0 / 10%);
	box-shadow: 0 2px 8px oklch(0 0 0 / 30%);
}

.tldraw-theme-dark .tl-bookmark__container:hover {
	box-shadow: 0 4px 16px oklch(0 0 0 / 40%);
	border-color: oklch(1 0 0 / 20%);
}

.tldraw-theme-dark .tl-bookmark__copy_container {
	background-color: oklch(0.12 0 0);
}

.tldraw-theme-dark .tl-bookmark__heading {
	color: oklch(0.95 0 0);
}

.tldraw-theme-dark .tl-bookmark__description {
	color: oklch(0.7 0 0);
}

.tldraw-theme-dark .tl-bookmark__link {
	color: oklch(0.5 0 0);
}

.tldraw-theme-dark .tl-bookmark__placeholder {
	background: linear-gradient(135deg, oklch(0.15 0 0), oklch(0.2 0 0));
}

/* ============================================
   Embed Cards (YouTube etc) - Matching Style
   ============================================ */
.tldraw-canvas-container .tl-embed {
	border-radius: 12px;
	overflow: hidden;
	box-shadow: 0 2px 8px oklch(0 0 0 / 10%);
}

.tldraw-theme-dark .tl-embed {
	box-shadow: 0 2px 8px oklch(0 0 0 / 30%);
}

/* ============================================
   Top Left Menu Zone - Page Menu styling
   ============================================ */

/* Main menu zone container - just page menu */
.tldraw-canvas-container .tlui-menu-zone {
	background-color: hsl(var(--background));
	border: 1px solid hsl(var(--foreground) / 0.15);
	border-radius: 8px;
	overflow: hidden;
	box-shadow: none;
}

/* All buttons in menu zone - clean style */
.tldraw-canvas-container .tlui-menu-zone .tlui-button {
	background-color: transparent;
	border-radius: 6px;
	transition: background-color 0.15s ease;
}

.tldraw-canvas-container .tlui-menu-zone .tlui-button:hover {
	background-color: hsl(var(--foreground) / 0.1);
}

.tldraw-canvas-container .tlui-menu-zone .tlui-button[data-state="open"],
.tldraw-canvas-container .tlui-menu-zone .tlui-button[aria-expanded="true"] {
	background-color: hsl(var(--foreground) / 0.1);
}

/* Remove blue highlight */
.tldraw-canvas-container .tlui-menu-zone .tlui-button::after {
	display: none;
}

/* Button text and icons */
.tldraw-canvas-container .tlui-menu-zone .tlui-button {
	color: hsl(var(--foreground) / 0.8);
}

.tldraw-canvas-container .tlui-menu-zone .tlui-button:hover {
	color: hsl(var(--foreground));
}

.tldraw-canvas-container .tlui-menu-zone .tlui-icon {
	color: inherit;
}

/* ============================================
   Dropdowns/Popovers - Consistent with App
   ============================================ */
.tldraw-canvas-container .tlui-popover__content,
.tldraw-canvas-container .tlui-menu__content {
	border-radius: 12px;
	border: 1px solid oklch(0.5 0 0 / 15%);
	box-shadow: 0 4px 16px oklch(0 0 0 / 15%);
	padding: 4px;
	overflow: hidden;
}

.tldraw-theme-light .tlui-popover__content,
.tldraw-theme-light .tlui-menu__content {
	background-color: oklch(1 0 0);
	border-color: oklch(0.92 0 0);
}

.tldraw-theme-dark .tlui-popover__content,
.tldraw-theme-dark .tlui-menu__content {
	background-color: oklch(0.12 0 0);
	border-color: oklch(1 0 0 / 12%);
	box-shadow: 0 4px 16px oklch(0 0 0 / 40%);
}

/* Menu items */
.tldraw-canvas-container .tlui-menu__item,
.tldraw-canvas-container .tlui-button__menu {
	border-radius: 8px;
	padding: 8px 12px;
	font-size: 13px;
	transition: background-color 0.15s ease;
}

.tldraw-theme-light .tlui-menu__item:hover,
.tldraw-theme-light .tlui-button__menu:hover {
	background-color: oklch(0 0 0 / 5%);
}

.tldraw-theme-dark .tlui-menu__item:hover,
.tldraw-theme-dark .tlui-button__menu:hover {
	background-color: oklch(1 0 0 / 8%);
}
